/*****************************************************************//**
 * \file   TrianglePolygon.h
 * \brief  △ポリゴン表示用テストクラス
 * 
 * \author Hiroto Kuge
 * \date   March 2023
 *********************************************************************/
#pragma once

//=============================================================================
// Forword Decolations
//=============================================================================
class RenderContext;

//頂点構造体
struct SimpleVertex {
	float pos[3];	//頂点座標
	float color[3];	//頂点カラー
	float uv[2];	//UV座標
};

//=============================================================================
// TrianglePolygon Class
//=============================================================================
class TrianglePolygon{
	//-----------------------------------------------------------------------------
	// list of friends classes and methods.
	//-----------------------------------------------------------------------------	
	//!{
			/* Nothing */
	//!} 
public:
	//-----------------------------------------------------------------------------
	// public variables.
	//-----------------------------------------------------------------------------
	//!{
			/* Nothing */
	//!} 
	//-----------------------------------------------------------------------------
	// public methods.
	//-----------------------------------------------------------------------------
	//!{
	
	/*****************************************************************//**
	 * \brief 初期化
	 * 
	 * \param rs ルートシグニチャ
	 *********************************************************************/
	void Init(RootSignature& rs);
	
	/*****************************************************************//**
	 * \brief 描画
	 * 
	 * \param rc レンダリングコンテキスト
	 *********************************************************************/
	void Draw(RenderContext& rc);
		
	/*****************************************************************//**
	 * \brief UV座標を設定
	 * 
	 * \param vertNo 頂点番号
	 * \param U	U座標
	 * \param V V座標
	 *********************************************************************/
	void SetUVCoord(int vertNo, float U, float V);
	//!} 
private:
	//-----------------------------------------------------------------------------
	// private variables.
	//-----------------------------------------------------------------------------
	//!{

	VertexBuffer m_vertexBuffer;	//頂点バッファ
	IndexBuffer m_indexBuffer;		//インデックスバッファ
	Shader m_vertexShader;			//頂点シェーダー
	Shader m_pixelShader;			//ピクセルシェーダー
	PipelineState m_pipelineState;	//パイプラインステート
	SimpleVertex m_vertices[3];		//頂点データ

	//!}
	//-----------------------------------------------------------------------------
	// private methods.
	//----------------------------------------------------------------------------- 	
	//!{
	
	/*****************************************************************//**
	 * \brief パイプラインステートを初期化
	 * 
	 * \param rs ルートシグネチャ
	 *********************************************************************/
	void InitPipelineState(RootSignature& rs);

	/*****************************************************************//**
	 * \brief シェーダーをロード
	 *********************************************************************/
	void LoadShaders();
	
	/*****************************************************************//**
	 * \brief 頂点バッファを初期化
	 *********************************************************************/
	void InitVertexBuffer();
	
	/*****************************************************************//**
	 * \brief インデックスバッファを初期化
	 *********************************************************************/
	void InitIndexBuffer();
	//!} 
};

